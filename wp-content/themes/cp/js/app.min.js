"use strict";

$(document).ready(function () {
  $(window).on('load', function () {
    var headerLocation = $("header").offset();

    if ($("body").hasClass("home")) {
      if (headerLocation.top < 70) {
        $(".header").addClass("transparent-header");
      } else if (headerLocation.top > 70 && headerLocation.top < 600) {
        $(".header").addClass('header-visibility-none');
      }
    }
  });
  $(".nav-tools__search").on("click", function () {
    $(".nav-tools__search-block_click").toggleClass("nav-tools__search-block_click-show");
    $(".nav-tools__search").toggleClass("nav-tools-close"); // $('.header').toggleClass('header-onclick-search_and_burg');

    if ($(".nav-tools__search-block_click-show")) {
      $(".nav-tools__burger").removeClass("nav-tools__burger-open");
      $(".burger-menu__block").removeClass("burger-menu__block-show");
    }
  });
  $(".nav-tools__burger").on("click", function () {
    $(".nav-tools__burger").toggleClass("nav-tools__burger-open");
    $(".burger-menu__block").toggleClass("burger-menu__block-show");

    if ($(".burger-menu__block-show")) {
      $(".nav-tools__search-block_click").removeClass("nav-tools__search-block_click-show");
      $(".nav-tools__search").removeClass("nav-tools-close");
    }
  });
  var p = $(".popup__overlay");
  $(".popup__toggle").click(function () {
    p.addClass("popup_open");
  });
  $(".popup__close").click(function () {
    p.removeClass("popup_open");
  });
  $(function () {
    $(".popup__toggle").bind("click", function (e) {
      e.preventDefault();
    });
  });
  $("#textArea-connect").on("keydown keyup", function () {
    this.style.height = "1px";
    this.style.height = this.scrollHeight + "px";
    this.style.transition = "height .3s ease";
  });
  var searchBlock = $(".nav-tools__search-block_click");
  var menuBlock = $(".burger-menu__block");

  if ($("body").hasClass("home")) {
    $(window).scroll(function () {
      if ($(document).scrollTop() > 70 && $(document).scrollTop() <= 600) {
        if (searchBlock.hasClass("nav-tools__search-block_click-show") || menuBlock.hasClass("burger-menu__block-show")) {
          $(".header").css({
            'display': 'flex'
          });
        } else {
          $(".header").addClass('header-visibility-none');
        }

        ;
      } else {
        $(".header").removeClass('header-visibility-none');
      }

      if ($(document).scrollTop() >= 600) {
        $(".header").removeClass("transparent-header");
      } else {
        $(".header").addClass("transparent-header");
      }
    });
  } // Top-site slider functions 


  var sliderNavBlock = $(".slider-nav__block");
  var dot = $(".dot");
  var leftArrow = $(".nav-bar__prev");
  var rightArrow = $(".nav-bar__next"); // Function for desktop slider

  sliderNavBlock.click(function () {
    $(".slider-for__container").removeClass('content-active').hide().eq($(this).index()).addClass('content-active').show();
    $('.slider-nav__block').removeClass('active-block');
    $(this).addClass('active-block');
  }); // End of Desktop slider
  // Mobile slider

  dot.click(function () {
    // let sliderBlock = $(".slider-for__container"); 
    $(".dot").removeClass('dot-active');
    $(this).addClass('dot-active');
    $(".slider-for__container").removeClass('content-active').hide().eq($(".dot-active").index()).addClass('content-active').show();
    var currentColor = $('.content-active').children(".slider-nav__block-top").children(".nav__block-top__category").css('background');
    $(".dot").css({
      "background": "#9d9d9d"
    });
    $(this).css({
      "background": currentColor
    });
  });
  leftArrow.click(function () {
    var activeDot = $(".dot-active");
    var indexOfDot = $(".dot-active").index();
    var sliderBlock = $(".slider-for__container");
    activeDot.removeClass("dot-active");
    $(".dot").eq(indexOfDot - 1).addClass("dot-active");
    sliderBlock.removeClass('content-active').hide().eq($(".dot-active").index()).addClass('content-active').show();
    var currentColor = $('.content-active').children(".slider-nav__block-top").children(".nav__block-top__category").css('background');
    $(".dot-active").css({
      "background": currentColor
    });

    if ($(".dot-active").index() === 3) {
      $(".dot").eq(0).css({
        "background": "#9d9d9d"
      });
    }

    $(".dot").eq($(".dot-active").index() + 1).css({
      "background": "#9d9d9d"
    });
  });
  rightArrow.click(function () {
    var activeDot = $(".dot-active");
    var indexOfDot = $(".dot-active").index();
    var sliderBlock = $(".slider-for__container");
    activeDot.removeClass("dot-active");

    if (indexOfDot === 3) {
      $(".dot").eq(0).addClass("dot-active");
    } else {
      $(".dot").eq(indexOfDot + 1).addClass("dot-active");
    }

    sliderBlock.removeClass('content-active').hide().eq($(".dot-active").index()).addClass('content-active').show();
    var currentColor = $('.content-active').children(".slider-nav__block-top").children(".nav__block-top__category").css('background');
    $(".dot-active").css({
      "background": currentColor
    });
    $(".dot").eq($(".dot-active").index() - 1).css({
      "background": "#9d9d9d"
    });
  }); // End of mobile slider
  // End of top-site slider functions

  $(".hidden-block__open").on("click", function () {
    $(".text-block__half-hidden").toggleClass("text-block__half-hidden__open");

    if ($(".text-block__half-hidden").hasClass("text-block__half-hidden__open")) {
      $(".hidden-block__open").html("Свернуть");
    } else {
      $(".hidden-block__open").html("Развернуть");
    }
  });
  $('.slider-single').slick({
    slidesToShow: 1,
    slidesToScroll: 1,
    arrows: true,
    fade: false,
    adaptiveHeight: true,
    nextArrow: '<div class="arrow-next-cont">  <svg class="icon"><use xlink:href="#right-arrow" /></svg> </div>',
    prevArrow: '<div class="arrow-prev-cont">  <svg class="icon"><use xlink:href="#left-arrow" /></svg> </div>',
    infinite: false,
    useTransform: true,
    speed: 400,
    cssEase: 'cubic-bezier(0.77, 0, 0.18, 1)'
  });
  $('.slider-nav-about').on('init', function (event, slick) {
    $('.slider-nav-about .slick-slide.slick-current').addClass('is-active');
  }).slick({
    slidesToShow: 7,
    slidesToScroll: 7,
    dots: false,
    arrows: false,
    focusOnSelect: false,
    infinite: false,
    responsive: [{
      breakpoint: 1024,
      settings: {
        slidesToShow: 5,
        slidesToScroll: 5
      }
    }, {
      breakpoint: 640,
      settings: {
        slidesToShow: 4,
        slidesToScroll: 4
      }
    }, {
      breakpoint: 420,
      settings: {
        slidesToShow: 2,
        slidesToScroll: 2
      }
    }]
  });
  $('.slider-single').on('afterChange', function (event, slick, currentSlide) {
    $('.slider-nav-about').slick('slickGoTo', currentSlide);
    var currrentNavSlideElem = '.slider-nav-about .slick-slide[data-slick-index="' + currentSlide + '"]';
    $('.slider-nav-about .slick-slide.is-active').removeClass('is-active');
    $(currrentNavSlideElem).addClass('is-active');
  });
  $('.slider-nav-about').on('click', '.slick-slide', function (event) {
    event.preventDefault();
    var goToSingleSlide = $(this).data('slick-index');
    $('.slider-single').slick('slickGoTo', goToSingleSlide);
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsIndpbmRvdyIsIm9uIiwiaGVhZGVyTG9jYXRpb24iLCJvZmZzZXQiLCJoYXNDbGFzcyIsInRvcCIsImFkZENsYXNzIiwidG9nZ2xlQ2xhc3MiLCJyZW1vdmVDbGFzcyIsInAiLCJjbGljayIsImJpbmQiLCJlIiwicHJldmVudERlZmF1bHQiLCJzdHlsZSIsImhlaWdodCIsInNjcm9sbEhlaWdodCIsInRyYW5zaXRpb24iLCJzZWFyY2hCbG9jayIsIm1lbnVCbG9jayIsInNjcm9sbCIsInNjcm9sbFRvcCIsImNzcyIsInNsaWRlck5hdkJsb2NrIiwiZG90IiwibGVmdEFycm93IiwicmlnaHRBcnJvdyIsImhpZGUiLCJlcSIsImluZGV4Iiwic2hvdyIsImN1cnJlbnRDb2xvciIsImNoaWxkcmVuIiwiYWN0aXZlRG90IiwiaW5kZXhPZkRvdCIsInNsaWRlckJsb2NrIiwiaHRtbCIsInNsaWNrIiwic2xpZGVzVG9TaG93Iiwic2xpZGVzVG9TY3JvbGwiLCJhcnJvd3MiLCJmYWRlIiwiYWRhcHRpdmVIZWlnaHQiLCJuZXh0QXJyb3ciLCJwcmV2QXJyb3ciLCJpbmZpbml0ZSIsInVzZVRyYW5zZm9ybSIsInNwZWVkIiwiY3NzRWFzZSIsImV2ZW50IiwiZG90cyIsImZvY3VzT25TZWxlY3QiLCJyZXNwb25zaXZlIiwiYnJlYWtwb2ludCIsInNldHRpbmdzIiwiY3VycmVudFNsaWRlIiwiY3VycnJlbnROYXZTbGlkZUVsZW0iLCJnb1RvU2luZ2xlU2xpZGUiLCJkYXRhIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQUEsQ0FBQyxDQUFDQyxRQUFELENBQUQsQ0FBWUMsS0FBWixDQUFrQixZQUFZO0FBQzVCRixFQUFBQSxDQUFDLENBQUNHLE1BQUQsQ0FBRCxDQUFVQyxFQUFWLENBQWEsTUFBYixFQUFxQixZQUFZO0FBQy9CLFFBQUlDLGNBQWMsR0FBR0wsQ0FBQyxDQUFDLFFBQUQsQ0FBRCxDQUFZ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LEVBQUU7QUFGUjtBQUZULEtBWlM7QUFQUCxHQUpUO0FBZ0NBMUMsRUFBQUEsQ0FBQyxDQUFDLGdCQUFELENBQUQsQ0FBb0JJLEVBQXBCLENBQXVCLGFBQXZCLEVBQXNDLFVBQVNnRCxLQUFULEVBQWdCWixLQUFoQixFQUF1QmtCLFlBQXZCLEVBQXFDO0FBQ3pFMUQsSUFBQUEsQ0FBQyxDQUFDLG1CQUFELENBQUQsQ0FBdUJ3QyxLQUF2QixDQUE2QixXQUE3QixFQUEwQ2tCLFlBQTFDO0FBQ0EsUUFBSUMsb0JBQW9CLEdBQUcsc0RBQXNERCxZQUF0RCxHQUFxRSxJQUFoRztBQUNBMUQsSUFBQUEsQ0FBQyxDQUFDLDBDQUFELENBQUQsQ0FBOENXLFdBQTlDLENBQTBELFdBQTFEO0FBQ0FYLElBQUFBLENBQUMsQ0FBQzJELG9CQUFELENBQUQsQ0FBd0JsRCxRQUF4QixDQUFpQyxXQUFqQztBQUNELEdBTEQ7QUFPQVQsRUFBQUEsQ0FBQyxDQUFDLG1CQUFELENBQUQsQ0FBdUJJLEVBQXZCLENBQTBCLE9BQTFCLEVBQW1DLGNBQW5DLEVBQW1ELFVBQVNnRCxLQUFULEVBQWdCO0FBQ2pFQSxJQUFBQSxLQUFLLENBQUNwQyxjQUFOO0FBQ0EsUUFBSTRDLGVBQWUsR0FBRzVELENBQUMsQ0FBQyxJQUFELENBQUQsQ0FBUTZELElBQVIsQ0FBYSxhQUFiLENBQXRCO0FBRUE3RCxJQUFBQSxDQUFDLENBQUMsZ0JBQUQsQ0FBRCxDQUFvQndDLEtBQXBCLENBQTBCLFdBQTFCLEVBQXVDb0IsZUFBdkM7QUFDRCxHQUxEO0FBVUQsQ0E3TkQiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxuXHJcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcclxuICAkKHdpbmRvdykub24oJ2xvYWQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgaGVhZGVyTG9jYXRpb24gPSAkKFwiaGVhZGVyXCIpLm9mZnNldCgpO1xyXG4gICAgaWYgKCQoXCJib2R5XCIpLmhhc0NsYXNzKFwiaG9tZVwiKSkge1xyXG4gICAgICBpZiAoaGVhZGVyTG9jYXRpb24udG9wIDwgNzApIHtcclxuICAgICAgICAkKFwiLmhlYWRlclwiKS5hZGRDbGFzcyhcInRyYW5zcGFyZW50LWhlYWRlclwiKTtcclxuICAgICAgfSBlbHNlIGlmIChoZWFkZXJMb2NhdGlvbi50b3AgPiA3MCAmJiBoZWFkZXJMb2NhdGlvbi50b3AgPCA2MDApIHtcclxuICAgICAgICAkKFwiLmhlYWRlclwiKS5hZGRDbGFzcygnaGVhZGVyLXZpc2liaWxpdHktbm9uZScpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSk7XHJcbiAgJChcIi5uYXYtdG9vbHNfX3NlYXJjaFwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICQoXCIubmF2LXRvb2xzX19zZWFyY2gtYmxvY2tfY2xpY2tcIikudG9nZ2xlQ2xhc3MoXCJuYXYtdG9vbHNfX3NlYXJjaC1ibG9ja19jbGljay1zaG93XCIpO1xyXG4gICAgJChcIi5uYXYtdG9vbHNfX3NlYXJjaFwiKS50b2dnbGVDbGFzcyhcIm5hdi10b29scy1jbG9zZVwiKTsgLy8gJCgnLmhlYWRlcicpLnRvZ2dsZUNsYXNzKCdoZWFkZXItb25jbGljay1zZWFyY2hfYW5kX2J1cmcnKTtcclxuXHJcbiAgICBpZiAoJChcIi5uYXYtdG9vbHNfX3NlYXJjaC1ibG9ja19jbGljay1zaG93XCIpKSB7XHJcbiAgICAgICQoXCIubmF2LXRvb2xzX19idXJnZXJcIikucmVtb3ZlQ2xhc3MoXCJuYXYtdG9vbHNfX2J1cmdlci1vcGVuXCIpO1xyXG4gICAgICAkKFwiLmJ1cmdlci1tZW51X19ibG9ja1wiKS5yZW1vdmVDbGFzcyhcImJ1cmdlci1tZW51X19ibG9jay1zaG93XCIpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG4gICQoXCIubmF2LXRvb2xzX19idXJnZXJcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAkKFwiLm5hdi10b29sc19fYnVyZ2VyXCIpLnRvZ2dsZUNsYXNzKFwibmF2LXRvb2xzX19idXJnZXItb3BlblwiKTtcclxuICAgICQoXCIuYnVyZ2VyLW1lbnVfX2Jsb2NrXCIpLnRvZ2dsZUNsYXNzKFwiYnVyZ2VyLW1lbnVfX2Jsb2NrLXNob3dcIik7XHJcblxyXG4gICAgaWYgKCQoXCIuYnVyZ2VyLW1lbnVfX2Jsb2NrLXNob3dcIikpIHtcclxuICAgICAgJChcIi5uYXYtdG9vbHNfX3NlYXJjaC1ibG9ja19jbGlja1wiKS5yZW1vdmVDbGFzcyhcIm5hdi10b29sc19fc2VhcmNoLWJsb2NrX2NsaWNrLXNob3dcIik7XHJcbiAgICAgICQoXCIubmF2LXRvb2xzX19zZWFyY2hcIikucmVtb3ZlQ2xhc3MoXCJuYXYtdG9vbHMtY2xvc2VcIik7XHJcbiAgICB9XHJcbiAgfSk7XHJcbiAgdmFyIHAgPSAkKFwiLnBvcHVwX19vdmVybGF5XCIpO1xyXG4gICQoXCIucG9wdXBfX3RvZ2dsZVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICBwLmFkZENsYXNzKFwicG9wdXBfb3BlblwiKTtcclxuICB9KTtcclxuICAkKFwiLnBvcHVwX19jbG9zZVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICBwLnJlbW92ZUNsYXNzKFwicG9wdXBfb3BlblwiKTtcclxuICB9KTtcclxuICAkKGZ1bmN0aW9uICgpIHtcclxuICAgICQoXCIucG9wdXBfX3RvZ2dsZVwiKS5iaW5kKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbiAgJChcIiN0ZXh0QXJlYS1jb25uZWN0XCIpLm9uKFwia2V5ZG93biBrZXl1cFwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLnN0eWxlLmhlaWdodCA9IFwiMXB4XCI7XHJcbiAgICB0aGlzLnN0eWxlLmhlaWdodCA9IHRoaXMuc2Nyb2xsSGVpZ2h0ICsgXCJweFwiO1xyXG4gICAgdGhpcy5zdHlsZS50cmFuc2l0aW9uID0gXCJoZWlnaHQgLjNzIGVhc2VcIjtcclxuICB9KTtcclxuICB2YXIgc2VhcmNoQmxvY2sgPSAkKFwiLm5hdi10b29sc19fc2VhcmNoLWJsb2NrX2NsaWNrXCIpO1xyXG4gIHZhciBtZW51QmxvY2sgPSAkKFwiLmJ1cmdlci1tZW51X19ibG9ja1wiKTtcclxuXHJcbiAgaWYgKCQoXCJib2R5XCIpLmhhc0NsYXNzKFwiaG9tZVwiKSkge1xyXG4gICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGlmICgkKGRvY3VtZW50KS5zY3JvbGxUb3AoKSA+IDcwICYmICQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpIDw9IDYwMCkge1xyXG4gICAgICAgIGlmIChzZWFyY2hCbG9jay5oYXNDbGFzcyhcIm5hdi10b29sc19fc2VhcmNoLWJsb2NrX2NsaWNrLXNob3dcIikgfHwgbWVudUJsb2NrLmhhc0NsYXNzKFwiYnVyZ2VyLW1lbnVfX2Jsb2NrLXNob3dcIikpIHtcclxuICAgICAgICAgICQoXCIuaGVhZGVyXCIpLmNzcyh7XHJcbiAgICAgICAgICAgICdkaXNwbGF5JzogJ2ZsZXgnXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgJChcIi5oZWFkZXJcIikuYWRkQ2xhc3MoJ2hlYWRlci12aXNpYmlsaXR5LW5vbmUnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAkKFwiLmhlYWRlclwiKS5yZW1vdmVDbGFzcygnaGVhZGVyLXZpc2liaWxpdHktbm9uZScpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoJChkb2N1bWVudCkuc2Nyb2xsVG9wKCkgPj0gNjAwKSB7XHJcbiAgICAgICAgJChcIi5oZWFkZXJcIikucmVtb3ZlQ2xhc3MoXCJ0cmFuc3BhcmVudC1oZWFkZXJcIik7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJChcIi5oZWFkZXJcIikuYWRkQ2xhc3MoXCJ0cmFuc3BhcmVudC1oZWFkZXJcIik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0gLy8gVG9wLXNpdGUgc2xpZGVyIGZ1bmN0aW9ucyBcclxuXHJcblxyXG4gIHZhciBzbGlkZXJOYXZCbG9jayA9ICQoXCIuc2xpZGVyLW5hdl9fYmxvY2tcIik7XHJcbiAgdmFyIGRvdCA9ICQoXCIuZG90XCIpO1xyXG4gIHZhciBsZWZ0QXJyb3cgPSAkKFwiLm5hdi1iYXJfX3ByZXZcIik7XHJcbiAgdmFyIHJpZ2h0QXJyb3cgPSAkKFwiLm5hdi1iYXJfX25leHRcIik7IC8vIEZ1bmN0aW9uIGZvciBkZXNrdG9wIHNsaWRlclxyXG5cclxuICBzbGlkZXJOYXZCbG9jay5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAkKFwiLnNsaWRlci1mb3JfX2NvbnRhaW5lclwiKS5yZW1vdmVDbGFzcygnY29udGVudC1hY3RpdmUnKS5oaWRlKCkuZXEoJCh0aGlzKS5pbmRleCgpKS5hZGRDbGFzcygnY29udGVudC1hY3RpdmUnKS5zaG93KCk7XHJcbiAgICAkKCcuc2xpZGVyLW5hdl9fYmxvY2snKS5yZW1vdmVDbGFzcygnYWN0aXZlLWJsb2NrJyk7XHJcbiAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUtYmxvY2snKTtcclxuICB9KTsgLy8gRW5kIG9mIERlc2t0b3Agc2xpZGVyXHJcblxyXG4gIC8vIE1vYmlsZSBzbGlkZXJcclxuXHJcbiAgZG90LmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgIC8vIGxldCBzbGlkZXJCbG9jayA9ICQoXCIuc2xpZGVyLWZvcl9fY29udGFpbmVyXCIpOyBcclxuICAgICQoXCIuZG90XCIpLnJlbW92ZUNsYXNzKCdkb3QtYWN0aXZlJyk7XHJcbiAgICAkKHRoaXMpLmFkZENsYXNzKCdkb3QtYWN0aXZlJyk7XHJcbiAgICAkKFwiLnNsaWRlci1mb3JfX2NvbnRhaW5lclwiKS5yZW1vdmVDbGFzcygnY29udGVudC1hY3RpdmUnKS5oaWRlKCkuZXEoJChcIi5kb3QtYWN0aXZlXCIpLmluZGV4KCkpLmFkZENsYXNzKCdjb250ZW50LWFjdGl2ZScpLnNob3coKTtcclxuICAgIHZhciBjdXJyZW50Q29sb3IgPSAkKCcuY29udGVudC1hY3RpdmUnKS5jaGlsZHJlbihcIi5zbGlkZXItbmF2X19ibG9jay10b3BcIikuY2hpbGRyZW4oXCIubmF2X19ibG9jay10b3BfX2NhdGVnb3J5XCIpLmNzcygnYmFja2dyb3VuZCcpO1xyXG4gICAgJChcIi5kb3RcIikuY3NzKHtcclxuICAgICAgXCJiYWNrZ3JvdW5kXCI6IFwiIzlkOWQ5ZFwiXHJcbiAgICB9KTtcclxuICAgICQodGhpcykuY3NzKHtcclxuICAgICAgXCJiYWNrZ3JvdW5kXCI6IGN1cnJlbnRDb2xvclxyXG4gICAgfSk7XHJcbiAgfSk7XHJcbiAgbGVmdEFycm93LmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBhY3RpdmVEb3QgPSAkKFwiLmRvdC1hY3RpdmVcIik7XHJcbiAgICB2YXIgaW5kZXhPZkRvdCA9ICQoXCIuZG90LWFjdGl2ZVwiKS5pbmRleCgpO1xyXG4gICAgdmFyIHNsaWRlckJsb2NrID0gJChcIi5zbGlkZXItZm9yX19jb250YWluZXJcIik7XHJcbiAgICBhY3RpdmVEb3QucmVtb3ZlQ2xhc3MoXCJkb3QtYWN0aXZlXCIpO1xyXG4gICAgJChcIi5kb3RcIikuZXEoaW5kZXhPZkRvdCAtIDEpLmFkZENsYXNzKFwiZG90LWFjdGl2ZVwiKTtcclxuICAgIHNsaWRlckJsb2NrLnJlbW92ZUNsYXNzKCdjb250ZW50LWFjdGl2ZScpLmhpZGUoKS5lcSgkKFwiLmRvdC1hY3RpdmVcIikuaW5kZXgoKSkuYWRkQ2xhc3MoJ2NvbnRlbnQtYWN0aXZlJykuc2hvdygpO1xyXG4gICAgdmFyIGN1cnJlbnRDb2xvciA9ICQoJy5jb250ZW50LWFjdGl2ZScpLmNoaWxkcmVuKFwiLnNsaWRlci1uYXZfX2Jsb2NrLXRvcFwiKS5jaGlsZHJlbihcIi5uYXZfX2Jsb2NrLXRvcF9fY2F0ZWdvcnlcIikuY3NzKCdiYWNrZ3JvdW5kJyk7XHJcbiAgICAkKFwiLmRvdC1hY3RpdmVcIikuY3NzKHtcclxuICAgICAgXCJiYWNrZ3JvdW5kXCI6IGN1cnJlbnRDb2xvclxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKCQoXCIuZG90LWFjdGl2ZVwiKS5pbmRleCgpID09PSAzKSB7XHJcbiAgICAgICQoXCIuZG90XCIpLmVxKDApLmNzcyh7XHJcbiAgICAgICAgXCJiYWNrZ3JvdW5kXCI6IFwiIzlkOWQ5ZFwiXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgICQoXCIuZG90XCIpLmVxKCQoXCIuZG90LWFjdGl2ZVwiKS5pbmRleCgpICsgMSkuY3NzKHtcclxuICAgICAgXCJiYWNrZ3JvdW5kXCI6IFwiIzlkOWQ5ZFwiXHJcbiAgICB9KTtcclxuICB9KTtcclxuICByaWdodEFycm93LmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBhY3RpdmVEb3QgPSAkKFwiLmRvdC1hY3RpdmVcIik7XHJcbiAgICB2YXIgaW5kZXhPZkRvdCA9ICQoXCIuZG90LWFjdGl2ZVwiKS5pbmRleCgpO1xyXG4gICAgdmFyIHNsaWRlckJsb2NrID0gJChcIi5zbGlkZXItZm9yX19jb250YWluZXJcIik7XHJcbiAgICBhY3RpdmVEb3QucmVtb3ZlQ2xhc3MoXCJkb3QtYWN0aXZlXCIpO1xyXG5cclxuICAgIGlmIChpbmRleE9mRG90ID09PSAzKSB7XHJcbiAgICAgICQoXCIuZG90XCIpLmVxKDApLmFkZENsYXNzKFwiZG90LWFjdGl2ZVwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICQoXCIuZG90XCIpLmVxKGluZGV4T2ZEb3QgKyAxKS5hZGRDbGFzcyhcImRvdC1hY3RpdmVcIik7XHJcbiAgICB9XHJcblxyXG4gICAgc2xpZGVyQmxvY2sucmVtb3ZlQ2xhc3MoJ2NvbnRlbnQtYWN0aXZlJykuaGlkZSgpLmVxKCQoXCIuZG90LWFjdGl2ZVwiKS5pbmRleCgpKS5hZGRDbGFzcygnY29udGVudC1hY3RpdmUnKS5zaG93KCk7XHJcbiAgICB2YXIgY3VycmVudENvbG9yID0gJCgnLmNvbnRlbnQtYWN0aXZlJykuY2hpbGRyZW4oXCIuc2xpZGVyLW5hdl9fYmxvY2stdG9wXCIpLmNoaWxkcmVuKFwiLm5hdl9fYmxvY2stdG9wX19jYXRlZ29yeVwiKS5jc3MoJ2JhY2tncm91bmQnKTtcclxuICAgICQoXCIuZG90LWFjdGl2ZVwiKS5jc3Moe1xyXG4gICAgICBcImJhY2tncm91bmRcIjogY3VycmVudENvbG9yXHJcbiAgICB9KTtcclxuICAgICQoXCIuZG90XCIpLmVxKCQoXCIuZG90LWFjdGl2ZVwiKS5pbmRleCgpIC0gMSkuY3NzKHtcclxuICAgICAgXCJiYWNrZ3JvdW5kXCI6IFwiIzlkOWQ5ZFwiXHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgLy8gRW5kIG9mIG1vYmlsZSBzbGlkZXJcclxuICAvLyBFbmQgb2YgdG9wLXNpdGUgc2xpZGVyIGZ1bmN0aW9uc1xyXG5cclxuICAkKFwiLmhpZGRlbi1ibG9ja19fb3BlblwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICQoXCIudGV4dC1ibG9ja19faGFsZi1oaWRkZW5cIikudG9nZ2xlQ2xhc3MoXCJ0ZXh0LWJsb2NrX19oYWxmLWhpZGRlbl9fb3BlblwiKTtcclxuXHJcbiAgICBpZiAoJChcIi50ZXh0LWJsb2NrX19oYWxmLWhpZGRlblwiKS5oYXNDbGFzcyhcInRleHQtYmxvY2tfX2hhbGYtaGlkZGVuX19vcGVuXCIpKSB7XHJcbiAgICAgICQoXCIuaGlkZGVuLWJsb2NrX19vcGVuXCIpLmh0bWwoXCLQodCy0LXRgNC90YPRgtGMXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgJChcIi5oaWRkZW4tYmxvY2tfX29wZW5cIikuaHRtbChcItCg0LDQt9Cy0LXRgNC90YPRgtGMXCIpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuXHJcbiAgJCgnLnNsaWRlci1zaW5nbGUnKS5zbGljayh7XHJcbiAgICBzbGlkZXNUb1Nob3c6IDEsXHJcbiAgICBzbGlkZXNUb1Njcm9sbDogMSxcclxuICAgIGFycm93czogdHJ1ZSxcclxuICAgIGZhZGU6IGZhbHNlLFxyXG4gICAgYWRhcHRpdmVIZWlnaHQ6IHRydWUsXHJcbiAgICBuZXh0QXJyb3c6ICc8ZGl2IGNsYXNzPVwiYXJyb3ctbmV4dC1jb250XCI+ICA8c3ZnIGNsYXNzPVwiaWNvblwiPjx1c2UgeGxpbms6aHJlZj1cIiNyaWdodC1hcnJvd1wiIC8+PC9zdmc+IDwvZGl2PicsXHJcbiAgICBwcmV2QXJyb3c6ICc8ZGl2IGNsYXNzPVwiYXJyb3ctcHJldi1jb250XCI+ICA8c3ZnIGNsYXNzPVwiaWNvblwiPjx1c2UgeGxpbms6aHJlZj1cIiNsZWZ0LWFycm93XCIgLz48L3N2Zz4gPC9kaXY+JyxcclxuICAgIGluZmluaXRlOiBmYWxzZSxcclxuICAgdXNlVHJhbnNmb3JtOiB0cnVlLFxyXG4gICAgc3BlZWQ6IDQwMCxcclxuICAgIGNzc0Vhc2U6ICdjdWJpYy1iZXppZXIoMC43NywgMCwgMC4xOCwgMSknLFxyXG4gIH0pO1xyXG4gXHJcbiAgJCgnLnNsaWRlci1uYXYtYWJvdXQnKVxyXG4gICAgLm9uKCdpbml0JywgZnVuY3Rpb24oZXZlbnQsIHNsaWNrKSB7XHJcbiAgICAgICQoJy5zbGlkZXItbmF2LWFib3V0IC5zbGljay1zbGlkZS5zbGljay1jdXJyZW50JykuYWRkQ2xhc3MoJ2lzLWFjdGl2ZScpO1xyXG4gICAgfSlcclxuICAgIC5zbGljayh7XHJcbiAgICAgIHNsaWRlc1RvU2hvdzogNyxcclxuICAgICAgc2xpZGVzVG9TY3JvbGw6IDcsXHJcbiAgICAgIGRvdHM6IGZhbHNlLFxyXG4gICAgICBhcnJvd3M6IGZhbHNlLFxyXG4gICAgICBmb2N1c09uU2VsZWN0OiBmYWxzZSxcclxuICAgICAgaW5maW5pdGU6IGZhbHNlLFxyXG4gICAgICByZXNwb25zaXZlOiBbe1xyXG4gICAgICAgIGJyZWFrcG9pbnQ6IDEwMjQsXHJcbiAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgIHNsaWRlc1RvU2hvdzogNSxcclxuICAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiA1LFxyXG4gICAgICAgIH1cclxuICAgICAgfSwge1xyXG4gICAgICAgIGJyZWFrcG9pbnQ6IDY0MCxcclxuICAgICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgICAgc2xpZGVzVG9TaG93OiA0LFxyXG4gICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDQsXHJcbiAgICAgICB9XHJcbiAgICAgIH0sIHtcclxuICAgICAgICBicmVha3BvaW50OiA0MjAsXHJcbiAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgIHNsaWRlc1RvU2hvdzogMixcclxuICAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiAyLFxyXG4gICAgIH1cclxuICAgICAgfV1cclxuICAgIH0pO1xyXG4gXHJcbiAgJCgnLnNsaWRlci1zaW5nbGUnKS5vbignYWZ0ZXJDaGFuZ2UnLCBmdW5jdGlvbihldmVudCwgc2xpY2ssIGN1cnJlbnRTbGlkZSkge1xyXG4gICAgJCgnLnNsaWRlci1uYXYtYWJvdXQnKS5zbGljaygnc2xpY2tHb1RvJywgY3VycmVudFNsaWRlKTtcclxuICAgIHZhciBjdXJycmVudE5hdlNsaWRlRWxlbSA9ICcuc2xpZGVyLW5hdi1hYm91dCAuc2xpY2stc2xpZGVbZGF0YS1zbGljay1pbmRleD1cIicgKyBjdXJyZW50U2xpZGUgKyAnXCJdJztcclxuICAgICQoJy5zbGlkZXItbmF2LWFib3V0IC5zbGljay1zbGlkZS5pcy1hY3RpdmUnKS5yZW1vdmVDbGFzcygnaXMtYWN0aXZlJyk7XHJcbiAgICAkKGN1cnJyZW50TmF2U2xpZGVFbGVtKS5hZGRDbGFzcygnaXMtYWN0aXZlJyk7XHJcbiAgfSk7XHJcbiBcclxuICAkKCcuc2xpZGVyLW5hdi1hYm91dCcpLm9uKCdjbGljaycsICcuc2xpY2stc2xpZGUnLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIHZhciBnb1RvU2luZ2xlU2xpZGUgPSAkKHRoaXMpLmRhdGEoJ3NsaWNrLWluZGV4Jyk7XHJcbiBcclxuICAgICQoJy5zbGlkZXItc2luZ2xlJykuc2xpY2soJ3NsaWNrR29UbycsIGdvVG9TaW5nbGVTbGlkZSk7XHJcbiAgfSk7XHJcblxyXG5cclxuXHJcblxyXG59KTtcclxuXHJcblxyXG4iXSwiZmlsZSI6ImFwcC5taW4uanMifQ==
