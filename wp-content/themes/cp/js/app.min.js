"use strict";

$(document).ready(function () {
  $(window).on('load', function () {
    var headerLocation = $("header").offset();

    if ($("body").hasClass("home")) {
      if (headerLocation.top < 70) {
        $(".header").addClass("transparent-header");
      } else if (headerLocation.top > 70 && headerLocation.top < 600) {
        $(".header").addClass('header-visibility-none');
      }
    }
  });
  $(".nav-tools__search").on("click", function () {
    $(".nav-tools__search-block_click").toggleClass("nav-tools__search-block_click-show");
    $(".nav-tools__search").toggleClass("nav-tools-close"); // $('.header').toggleClass('header-onclick-search_and_burg');

    if ($(".nav-tools__search-block_click-show")) {
      $(".nav-tools__burger").removeClass("nav-tools__burger-open");
      $(".burger-menu__block").removeClass("burger-menu__block-show");
    }
  });
  $(".nav-tools__burger").on("click", function () {
    $(".nav-tools__burger").toggleClass("nav-tools__burger-open");
    $(".burger-menu__block").toggleClass("burger-menu__block-show");

    if ($(".burger-menu__block-show")) {
      $(".nav-tools__search-block_click").removeClass("nav-tools__search-block_click-show");
      $(".nav-tools__search").removeClass("nav-tools-close");
    }
  });
  var p = $(".popup__overlay");
  $(".popup__toggle").click(function () {
    p.addClass("popup_open");
  });
  p.click(function (event) {
    e = event || window.event;

    if (e.target == this) {
      $(p).removeClass("popup_open");
    }
  });
  $(".popup__close").click(function () {
    p.removeClass("popup_open");
  });
  $(function () {
    $(".popup__toggle").bind("click", function (e) {
      e.preventDefault();
    });
  });
  $("#textArea-connect").on("keydown keyup", function () {
    this.style.height = "1px";
    this.style.height = this.scrollHeight + "px";
    this.style.transition = "height .3s ease";
  });
  var searchBlock = $(".nav-tools__search-block_click");
  var menuBlock = $(".burger-menu__block");

  if ($("body").hasClass("home")) {
    $(window).scroll(function () {
      if ($(document).scrollTop() > 70 && $(document).scrollTop() <= 600) {
        if (searchBlock.hasClass("nav-tools__search-block_click-show") || menuBlock.hasClass("burger-menu__block-show")) {
          $(".header").css({
            'display': 'flex'
          });
        } else {
          $(".header").addClass('header-visibility-none');
        }

        ;
      } else {
        $(".header").removeClass('header-visibility-none');
      }

      if ($(document).scrollTop() >= 600) {
        $(".header").removeClass("transparent-header");
      } else {
        $(".header").addClass("transparent-header");
      }
    });
  } // Top-site slider functions 


  var sliderNavBlock = $(".slider-nav__block");
  var dot = $(".dot");
  var leftArrow = $(".nav-bar__prev");
  var rightArrow = $(".nav-bar__next"); // Function for desktop slider

  sliderNavBlock.click(function () {
    $(".slider-for__container").removeClass('content-active').hide().eq($(this).index()).addClass('content-active').show();
    $('.slider-nav__block').removeClass('active-block');
    $(this).addClass('active-block');
  }); // End of Desktop slider
  // Mobile slider

  dot.click(function () {
    // let sliderBlock = $(".slider-for__container"); 
    $(".dot").removeClass('dot-active');
    $(this).addClass('dot-active');
    $(".slider-for__container").removeClass('content-active').hide().eq($(".dot-active").index()).addClass('content-active').show();
    var currentColor = $('.content-active').children(".slider-nav__block-top").children(".nav__block-top__category").css('background');
    $(".dot").css({
      "background": "#9d9d9d"
    });
    $(this).css({
      "background": currentColor
    });
  });
  leftArrow.click(function () {
    var activeDot = $(".dot-active");
    var indexOfDot = $(".dot-active").index();
    var sliderBlock = $(".slider-for__container");
    activeDot.removeClass("dot-active");
    $(".dot").eq(indexOfDot - 1).addClass("dot-active");
    sliderBlock.removeClass('content-active').hide().eq($(".dot-active").index()).addClass('content-active').show();
    var currentColor = $('.content-active').children(".slider-nav__block-top").children(".nav__block-top__category").css('background');
    $(".dot-active").css({
      "background": currentColor
    });

    if ($(".dot-active").index() === 3) {
      $(".dot").eq(0).css({
        "background": "#9d9d9d"
      });
    }

    $(".dot").eq($(".dot-active").index() + 1).css({
      "background": "#9d9d9d"
    });
  });
  rightArrow.click(function () {
    var activeDot = $(".dot-active");
    var indexOfDot = $(".dot-active").index();
    var sliderBlock = $(".slider-for__container");
    activeDot.removeClass("dot-active");

    if (indexOfDot === 3) {
      $(".dot").eq(0).addClass("dot-active");
    } else {
      $(".dot").eq(indexOfDot + 1).addClass("dot-active");
    }

    sliderBlock.removeClass('content-active').hide().eq($(".dot-active").index()).addClass('content-active').show();
    var currentColor = $('.content-active').children(".slider-nav__block-top").children(".nav__block-top__category").css('background');
    $(".dot-active").css({
      "background": currentColor
    });
    $(".dot").eq($(".dot-active").index() - 1).css({
      "background": "#9d9d9d"
    });
  }); // End of mobile slider
  // End of top-site slider functions

  $(".hidden-block__open").on("click", function () {
    $(".text-block__half-hidden").toggleClass("text-block__half-hidden__open");

    if ($(".text-block__half-hidden").hasClass("text-block__half-hidden__open")) {
      $(".hidden-block__open").html("Свернуть");
    } else {
      $(".hidden-block__open").html("Развернуть");
    }
  });
  $('.slider-single').slick({
    slidesToShow: 1,
    slidesToScroll: 1,
    arrows: true,
    fade: false,
    adaptiveHeight: true,
    nextArrow: '<div class="arrow-next-cont">  <svg class="icon"><use xlink:href="#right-arrow" /></svg> </div>',
    prevArrow: '<div class="arrow-prev-cont">  <svg class="icon"><use xlink:href="#left-arrow" /></svg> </div>',
    infinite: false,
    useTransform: true,
    speed: 400,
    cssEase: 'cubic-bezier(0.77, 0, 0.18, 1)'
  });
  $('.slider-nav-about').on('init', function (event, slick) {
    $('.slider-nav-about .slick-slide.slick-current').addClass('is-active');
  }).slick({
    slidesToShow: 7,
    slidesToScroll: 7,
    dots: false,
    arrows: false,
    focusOnSelect: false,
    infinite: false,
    responsive: [{
      breakpoint: 1024,
      settings: {
        slidesToShow: 5,
        slidesToScroll: 5
      }
    }, {
      breakpoint: 640,
      settings: {
        slidesToShow: 4,
        slidesToScroll: 4
      }
    }, {
      breakpoint: 420,
      settings: {
        slidesToShow: 2,
        slidesToScroll: 2
      }
    }]
  });
  $('.slider-single').on('afterChange', function (event, slick, currentSlide) {
    $('.slider-nav-about').slick('slickGoTo', currentSlide);
    var currrentNavSlideElem = '.slider-nav-about .slick-slide[data-slick-index="' + currentSlide + '"]';
    $('.slider-nav-about .slick-slide.is-active').removeClass('is-active');
    $(currrentNavSlideElem).addClass('is-active');
  });
  $('.slider-nav-about').on('click', '.slick-slide', function (event) {
    event.preventDefault();
    var goToSingleSlide = $(this).data('slick-index');
    $('.slider-single').slick('slickGoTo', goToSingleSlide);
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsIndpbmRvdyIsIm9uIiwiaGVhZGVyTG9jYXRpb24iLCJvZmZzZXQiLCJoYXNDbGFzcyIsInRvcCIsImFkZENsYXNzIiwidG9nZ2xlQ2xhc3MiLCJyZW1vdmVDbGFzcyIsInAiLCJjbGljayIsImV2ZW50IiwiZSIsInRhcmdldCIsImJpbmQiLCJwcmV2ZW50RGVmYXVsdCIsInN0eWxlIiwiaGVpZ2h0Iiwic2Nyb2xsSGVpZ2h0IiwidHJhbnNpdGlvbiIsInNlYXJjaEJsb2NrIiwibWVudUJsb2NrIiwic2Nyb2xsIiwic2Nyb2xsVG9wIiwiY3NzIiwic2xpZGVyTmF2QmxvY2siLCJkb3QiLCJsZWZ0QXJyb3ciLCJyaWdodEFycm93IiwiaGlkZSIsImVxIiwiaW5kZXgiLCJzaG93IiwiY3VycmVudENvbG9yIiwiY2hpbGRyZW4iLCJhY3RpdmVEb3QiLCJpbmRleE9mRG90Iiwic2xpZGVyQmxvY2siLCJodG1sIiwic2xpY2siLCJzbGlkZXNUb1Nob3ciLCJzbGlkZXNUb1Njcm9sbCIsImFycm93cyIsImZhZGUiLCJhZGFwdGl2ZUhlaWdodCIsIm5leHRBcnJvdyIsInByZXZBcnJvdyIsImluZmluaXRlIiwidXNlVHJhbnNmb3JtIiwic3BlZWQiLCJjc3NFYXNlIiwiZG90cyIsImZvY3VzT25TZWxlY3QiLCJyZXNwb25zaXZlIiwiYnJlYWtwb2ludCIsInNldHRpbmdzIiwiY3VycmVudFNsaWRlIiwiY3VycnJlbnROYXZTbGlkZUVsZW0iLCJnb1RvU2luZ2xlU2xpZGUiLCJkYXRhIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQUEsQ0FBQyxDQUFDQyxRQUFELENBQUQsQ0FBWUMsS0FBWixDQUFrQixZQUFZO0FBQzVCRixFQUFBQSxDQUFDLENBQUNHLE1BQUQsQ0FBRCxDQUFVQyxFQUFWLENBQWEsTUFBYixFQUFxQixZQUFZO0FBQy9CLFFBQUlDLGNBQWMsR0FBR0wsQ0FBQyxDQUFDLFFBQUQs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LEdBTEQ7QUFVRCxDQWpPRCIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xyXG5cclxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xyXG4gICQod2luZG93KS5vbignbG9hZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBoZWFkZXJMb2NhdGlvbiA9ICQoXCJoZWFkZXJcIikub2Zmc2V0KCk7XHJcbiAgICBpZiAoJChcImJvZHlcIikuaGFzQ2xhc3MoXCJob21lXCIpKSB7XHJcbiAgICAgIGlmIChoZWFkZXJMb2NhdGlvbi50b3AgPCA3MCkge1xyXG4gICAgICAgICQoXCIuaGVhZGVyXCIpLmFkZENsYXNzKFwidHJhbnNwYXJlbnQtaGVhZGVyXCIpO1xyXG4gICAgICB9IGVsc2UgaWYgKGhlYWRlckxvY2F0aW9uLnRvcCA+IDcwICYmIGhlYWRlckxvY2F0aW9uLnRvcCA8IDYwMCkge1xyXG4gICAgICAgICQoXCIuaGVhZGVyXCIpLmFkZENsYXNzKCdoZWFkZXItdmlzaWJpbGl0eS1ub25lJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KTtcclxuICAkKFwiLm5hdi10b29sc19fc2VhcmNoXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgJChcIi5uYXYtdG9vbHNfX3NlYXJjaC1ibG9ja19jbGlja1wiKS50b2dnbGVDbGFzcyhcIm5hdi10b29sc19fc2VhcmNoLWJsb2NrX2NsaWNrLXNob3dcIik7XHJcbiAgICAkKFwiLm5hdi10b29sc19fc2VhcmNoXCIpLnRvZ2dsZUNsYXNzKFwibmF2LXRvb2xzLWNsb3NlXCIpOyAvLyAkKCcuaGVhZGVyJykudG9nZ2xlQ2xhc3MoJ2hlYWRlci1vbmNsaWNrLXNlYXJjaF9hbmRfYnVyZycpO1xyXG5cclxuICAgIGlmICgkKFwiLm5hdi10b29sc19fc2VhcmNoLWJsb2NrX2NsaWNrLXNob3dcIikpIHtcclxuICAgICAgJChcIi5uYXYtdG9vbHNfX2J1cmdlclwiKS5yZW1vdmVDbGFzcyhcIm5hdi10b29sc19fYnVyZ2VyLW9wZW5cIik7XHJcbiAgICAgICQoXCIuYnVyZ2VyLW1lbnVfX2Jsb2NrXCIpLnJlbW92ZUNsYXNzKFwiYnVyZ2VyLW1lbnVfX2Jsb2NrLXNob3dcIik7XHJcbiAgICB9XHJcbiAgfSk7XHJcbiAgJChcIi5uYXYtdG9vbHNfX2J1cmdlclwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICQoXCIubmF2LXRvb2xzX19idXJnZXJcIikudG9nZ2xlQ2xhc3MoXCJuYXYtdG9vbHNfX2J1cmdlci1vcGVuXCIpO1xyXG4gICAgJChcIi5idXJnZXItbWVudV9fYmxvY2tcIikudG9nZ2xlQ2xhc3MoXCJidXJnZXItbWVudV9fYmxvY2stc2hvd1wiKTtcclxuXHJcbiAgICBpZiAoJChcIi5idXJnZXItbWVudV9fYmxvY2stc2hvd1wiKSkge1xyXG4gICAgICAkKFwiLm5hdi10b29sc19fc2VhcmNoLWJsb2NrX2NsaWNrXCIpLnJlbW92ZUNsYXNzKFwibmF2LXRvb2xzX19zZWFyY2gtYmxvY2tfY2xpY2stc2hvd1wiKTtcclxuICAgICAgJChcIi5uYXYtdG9vbHNfX3NlYXJjaFwiKS5yZW1vdmVDbGFzcyhcIm5hdi10b29scy1jbG9zZVwiKTtcclxuICAgIH1cclxuICB9KTtcclxuICB2YXIgcCA9ICQoXCIucG9wdXBfX292ZXJsYXlcIik7XHJcbiAgJChcIi5wb3B1cF9fdG9nZ2xlXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgIHAuYWRkQ2xhc3MoXCJwb3B1cF9vcGVuXCIpO1xyXG4gIH0pO1xyXG4gIHAuY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICBlID0gZXZlbnQgfHwgd2luZG93LmV2ZW50O1xyXG5cclxuICAgIGlmIChlLnRhcmdldCA9PSB0aGlzKSB7XHJcbiAgICAgICQocCkucmVtb3ZlQ2xhc3MoXCJwb3B1cF9vcGVuXCIpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG4gICQoXCIucG9wdXBfX2Nsb3NlXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgIHAucmVtb3ZlQ2xhc3MoXCJwb3B1cF9vcGVuXCIpO1xyXG4gIH0pO1xyXG4gICQoZnVuY3Rpb24gKCkge1xyXG4gICAgJChcIi5wb3B1cF9fdG9nZ2xlXCIpLmJpbmQoXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuICAkKFwiI3RleHRBcmVhLWNvbm5lY3RcIikub24oXCJrZXlkb3duIGtleXVwXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuc3R5bGUuaGVpZ2h0ID0gXCIxcHhcIjtcclxuICAgIHRoaXMuc3R5bGUuaGVpZ2h0ID0gdGhpcy5zY3JvbGxIZWlnaHQgKyBcInB4XCI7XHJcbiAgICB0aGlzLnN0eWxlLnRyYW5zaXRpb24gPSBcImhlaWdodCAuM3MgZWFzZVwiO1xyXG4gIH0pO1xyXG4gIHZhciBzZWFyY2hCbG9jayA9ICQoXCIubmF2LXRvb2xzX19zZWFyY2gtYmxvY2tfY2xpY2tcIik7XHJcbiAgdmFyIG1lbnVCbG9jayA9ICQoXCIuYnVyZ2VyLW1lbnVfX2Jsb2NrXCIpO1xyXG5cclxuICBpZiAoJChcImJvZHlcIikuaGFzQ2xhc3MoXCJob21lXCIpKSB7XHJcbiAgICAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgaWYgKCQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpID4gNzAgJiYgJChkb2N1bWVudCkuc2Nyb2xsVG9wKCkgPD0gNjAwKSB7XHJcbiAgICAgICAgaWYgKHNlYXJjaEJsb2NrLmhhc0NsYXNzKFwibmF2LXRvb2xzX19zZWFyY2gtYmxvY2tfY2xpY2stc2hvd1wiKSB8fCBtZW51QmxvY2suaGFzQ2xhc3MoXCJidXJnZXItbWVudV9fYmxvY2stc2hvd1wiKSkge1xyXG4gICAgICAgICAgJChcIi5oZWFkZXJcIikuY3NzKHtcclxuICAgICAgICAgICAgJ2Rpc3BsYXknOiAnZmxleCdcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAkKFwiLmhlYWRlclwiKS5hZGRDbGFzcygnaGVhZGVyLXZpc2liaWxpdHktbm9uZScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICQoXCIuaGVhZGVyXCIpLnJlbW92ZUNsYXNzKCdoZWFkZXItdmlzaWJpbGl0eS1ub25lJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICgkKGRvY3VtZW50KS5zY3JvbGxUb3AoKSA+PSA2MDApIHtcclxuICAgICAgICAkKFwiLmhlYWRlclwiKS5yZW1vdmVDbGFzcyhcInRyYW5zcGFyZW50LWhlYWRlclwiKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAkKFwiLmhlYWRlclwiKS5hZGRDbGFzcyhcInRyYW5zcGFyZW50LWhlYWRlclwiKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSAvLyBUb3Atc2l0ZSBzbGlkZXIgZnVuY3Rpb25zIFxyXG5cclxuXHJcbiAgdmFyIHNsaWRlck5hdkJsb2NrID0gJChcIi5zbGlkZXItbmF2X19ibG9ja1wiKTtcclxuICB2YXIgZG90ID0gJChcIi5kb3RcIik7XHJcbiAgdmFyIGxlZnRBcnJvdyA9ICQoXCIubmF2LWJhcl9fcHJldlwiKTtcclxuICB2YXIgcmlnaHRBcnJvdyA9ICQoXCIubmF2LWJhcl9fbmV4dFwiKTsgLy8gRnVuY3Rpb24gZm9yIGRlc2t0b3Agc2xpZGVyXHJcblxyXG4gIHNsaWRlck5hdkJsb2NrLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICQoXCIuc2xpZGVyLWZvcl9fY29udGFpbmVyXCIpLnJlbW92ZUNsYXNzKCdjb250ZW50LWFjdGl2ZScpLmhpZGUoKS5lcSgkKHRoaXMpLmluZGV4KCkpLmFkZENsYXNzKCdjb250ZW50LWFjdGl2ZScpLnNob3coKTtcclxuICAgICQoJy5zbGlkZXItbmF2X19ibG9jaycpLnJlbW92ZUNsYXNzKCdhY3RpdmUtYmxvY2snKTtcclxuICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZS1ibG9jaycpO1xyXG4gIH0pOyAvLyBFbmQgb2YgRGVza3RvcCBzbGlkZXJcclxuICAvLyBNb2JpbGUgc2xpZGVyXHJcblxyXG4gIGRvdC5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyBsZXQgc2xpZGVyQmxvY2sgPSAkKFwiLnNsaWRlci1mb3JfX2NvbnRhaW5lclwiKTsgXHJcbiAgICAkKFwiLmRvdFwiKS5yZW1vdmVDbGFzcygnZG90LWFjdGl2ZScpO1xyXG4gICAgJCh0aGlzKS5hZGRDbGFzcygnZG90LWFjdGl2ZScpO1xyXG4gICAgJChcIi5zbGlkZXItZm9yX19jb250YWluZXJcIikucmVtb3ZlQ2xhc3MoJ2NvbnRlbnQtYWN0aXZlJykuaGlkZSgpLmVxKCQoXCIuZG90LWFjdGl2ZVwiKS5pbmRleCgpKS5hZGRDbGFzcygnY29udGVudC1hY3RpdmUnKS5zaG93KCk7XHJcbiAgICB2YXIgY3VycmVudENvbG9yID0gJCgnLmNvbnRlbnQtYWN0aXZlJykuY2hpbGRyZW4oXCIuc2xpZGVyLW5hdl9fYmxvY2stdG9wXCIpLmNoaWxkcmVuKFwiLm5hdl9fYmxvY2stdG9wX19jYXRlZ29yeVwiKS5jc3MoJ2JhY2tncm91bmQnKTtcclxuICAgICQoXCIuZG90XCIpLmNzcyh7XHJcbiAgICAgIFwiYmFja2dyb3VuZFwiOiBcIiM5ZDlkOWRcIlxyXG4gICAgfSk7XHJcbiAgICAkKHRoaXMpLmNzcyh7XHJcbiAgICAgIFwiYmFja2dyb3VuZFwiOiBjdXJyZW50Q29sb3JcclxuICAgIH0pO1xyXG4gIH0pO1xyXG4gIGxlZnRBcnJvdy5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgYWN0aXZlRG90ID0gJChcIi5kb3QtYWN0aXZlXCIpO1xyXG4gICAgdmFyIGluZGV4T2ZEb3QgPSAkKFwiLmRvdC1hY3RpdmVcIikuaW5kZXgoKTtcclxuICAgIHZhciBzbGlkZXJCbG9jayA9ICQoXCIuc2xpZGVyLWZvcl9fY29udGFpbmVyXCIpO1xyXG4gICAgYWN0aXZlRG90LnJlbW92ZUNsYXNzKFwiZG90LWFjdGl2ZVwiKTtcclxuICAgICQoXCIuZG90XCIpLmVxKGluZGV4T2ZEb3QgLSAxKS5hZGRDbGFzcyhcImRvdC1hY3RpdmVcIik7XHJcbiAgICBzbGlkZXJCbG9jay5yZW1vdmVDbGFzcygnY29udGVudC1hY3RpdmUnKS5oaWRlKCkuZXEoJChcIi5kb3QtYWN0aXZlXCIpLmluZGV4KCkpLmFkZENsYXNzKCdjb250ZW50LWFjdGl2ZScpLnNob3coKTtcclxuICAgIHZhciBjdXJyZW50Q29sb3IgPSAkKCcuY29udGVudC1hY3RpdmUnKS5jaGlsZHJlbihcIi5zbGlkZXItbmF2X19ibG9jay10b3BcIikuY2hpbGRyZW4oXCIubmF2X19ibG9jay10b3BfX2NhdGVnb3J5XCIpLmNzcygnYmFja2dyb3VuZCcpO1xyXG4gICAgJChcIi5kb3QtYWN0aXZlXCIpLmNzcyh7XHJcbiAgICAgIFwiYmFja2dyb3VuZFwiOiBjdXJyZW50Q29sb3JcclxuICAgIH0pO1xyXG5cclxuICAgIGlmICgkKFwiLmRvdC1hY3RpdmVcIikuaW5kZXgoKSA9PT0gMykge1xyXG4gICAgICAkKFwiLmRvdFwiKS5lcSgwKS5jc3Moe1xyXG4gICAgICAgIFwiYmFja2dyb3VuZFwiOiBcIiM5ZDlkOWRcIlxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAkKFwiLmRvdFwiKS5lcSgkKFwiLmRvdC1hY3RpdmVcIikuaW5kZXgoKSArIDEpLmNzcyh7XHJcbiAgICAgIFwiYmFja2dyb3VuZFwiOiBcIiM5ZDlkOWRcIlxyXG4gICAgfSk7XHJcbiAgfSk7XHJcbiAgcmlnaHRBcnJvdy5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgYWN0aXZlRG90ID0gJChcIi5kb3QtYWN0aXZlXCIpO1xyXG4gICAgdmFyIGluZGV4T2ZEb3QgPSAkKFwiLmRvdC1hY3RpdmVcIikuaW5kZXgoKTtcclxuICAgIHZhciBzbGlkZXJCbG9jayA9ICQoXCIuc2xpZGVyLWZvcl9fY29udGFpbmVyXCIpO1xyXG4gICAgYWN0aXZlRG90LnJlbW92ZUNsYXNzKFwiZG90LWFjdGl2ZVwiKTtcclxuXHJcbiAgICBpZiAoaW5kZXhPZkRvdCA9PT0gMykge1xyXG4gICAgICAkKFwiLmRvdFwiKS5lcSgwKS5hZGRDbGFzcyhcImRvdC1hY3RpdmVcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAkKFwiLmRvdFwiKS5lcShpbmRleE9mRG90ICsgMSkuYWRkQ2xhc3MoXCJkb3QtYWN0aXZlXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHNsaWRlckJsb2NrLnJlbW92ZUNsYXNzKCdjb250ZW50LWFjdGl2ZScpLmhpZGUoKS5lcSgkKFwiLmRvdC1hY3RpdmVcIikuaW5kZXgoKSkuYWRkQ2xhc3MoJ2NvbnRlbnQtYWN0aXZlJykuc2hvdygpO1xyXG4gICAgdmFyIGN1cnJlbnRDb2xvciA9ICQoJy5jb250ZW50LWFjdGl2ZScpLmNoaWxkcmVuKFwiLnNsaWRlci1uYXZfX2Jsb2NrLXRvcFwiKS5jaGlsZHJlbihcIi5uYXZfX2Jsb2NrLXRvcF9fY2F0ZWdvcnlcIikuY3NzKCdiYWNrZ3JvdW5kJyk7XHJcbiAgICAkKFwiLmRvdC1hY3RpdmVcIikuY3NzKHtcclxuICAgICAgXCJiYWNrZ3JvdW5kXCI6IGN1cnJlbnRDb2xvclxyXG4gICAgfSk7XHJcbiAgICAkKFwiLmRvdFwiKS5lcSgkKFwiLmRvdC1hY3RpdmVcIikuaW5kZXgoKSAtIDEpLmNzcyh7XHJcbiAgICAgIFwiYmFja2dyb3VuZFwiOiBcIiM5ZDlkOWRcIlxyXG4gICAgfSk7XHJcbiAgfSk7IC8vIEVuZCBvZiBtb2JpbGUgc2xpZGVyXHJcbiAgLy8gRW5kIG9mIHRvcC1zaXRlIHNsaWRlciBmdW5jdGlvbnNcclxuXHJcbiAgJChcIi5oaWRkZW4tYmxvY2tfX29wZW5cIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAkKFwiLnRleHQtYmxvY2tfX2hhbGYtaGlkZGVuXCIpLnRvZ2dsZUNsYXNzKFwidGV4dC1ibG9ja19faGFsZi1oaWRkZW5fX29wZW5cIik7XHJcblxyXG4gICAgaWYgKCQoXCIudGV4dC1ibG9ja19faGFsZi1oaWRkZW5cIikuaGFzQ2xhc3MoXCJ0ZXh0LWJsb2NrX19oYWxmLWhpZGRlbl9fb3BlblwiKSkge1xyXG4gICAgICAkKFwiLmhpZGRlbi1ibG9ja19fb3BlblwiKS5odG1sKFwi0KHQstC10YDQvdGD0YLRjFwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICQoXCIuaGlkZGVuLWJsb2NrX19vcGVuXCIpLmh0bWwoXCLQoNCw0LfQstC10YDQvdGD0YLRjFwiKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcblxyXG4gICQoJy5zbGlkZXItc2luZ2xlJykuc2xpY2soe1xyXG4gICAgc2xpZGVzVG9TaG93OiAxLFxyXG4gICAgc2xpZGVzVG9TY3JvbGw6IDEsXHJcbiAgICBhcnJvd3M6IHRydWUsXHJcbiAgICBmYWRlOiBmYWxzZSxcclxuICAgIGFkYXB0aXZlSGVpZ2h0OiB0cnVlLFxyXG4gICAgbmV4dEFycm93OiAnPGRpdiBjbGFzcz1cImFycm93LW5leHQtY29udFwiPiAgPHN2ZyBjbGFzcz1cImljb25cIj48dXNlIHhsaW5rOmhyZWY9XCIjcmlnaHQtYXJyb3dcIiAvPjwvc3ZnPiA8L2Rpdj4nLFxyXG4gICAgcHJldkFycm93OiAnPGRpdiBjbGFzcz1cImFycm93LXByZXYtY29udFwiPiAgPHN2ZyBjbGFzcz1cImljb25cIj48dXNlIHhsaW5rOmhyZWY9XCIjbGVmdC1hcnJvd1wiIC8+PC9zdmc+IDwvZGl2PicsXHJcbiAgICBpbmZpbml0ZTogZmFsc2UsXHJcbiAgIHVzZVRyYW5zZm9ybTogdHJ1ZSxcclxuICAgIHNwZWVkOiA0MDAsXHJcbiAgICBjc3NFYXNlOiAnY3ViaWMtYmV6aWVyKDAuNzcsIDAsIDAuMTgsIDEpJyxcclxuICB9KTtcclxuIFxyXG4gICQoJy5zbGlkZXItbmF2LWFib3V0JylcclxuICAgIC5vbignaW5pdCcsIGZ1bmN0aW9uKGV2ZW50LCBzbGljaykge1xyXG4gICAgICAkKCcuc2xpZGVyLW5hdi1hYm91dCAuc2xpY2stc2xpZGUuc2xpY2stY3VycmVudCcpLmFkZENsYXNzKCdpcy1hY3RpdmUnKTtcclxuICAgIH0pXHJcbiAgICAuc2xpY2soe1xyXG4gICAgICBzbGlkZXNUb1Nob3c6IDcsXHJcbiAgICAgIHNsaWRlc1RvU2Nyb2xsOiA3LFxyXG4gICAgICBkb3RzOiBmYWxzZSxcclxuICAgICAgYXJyb3dzOiBmYWxzZSxcclxuICAgICAgZm9jdXNPblNlbGVjdDogZmFsc2UsXHJcbiAgICAgIGluZmluaXRlOiBmYWxzZSxcclxuICAgICAgcmVzcG9uc2l2ZTogW3tcclxuICAgICAgICBicmVha3BvaW50OiAxMDI0LFxyXG4gICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICBzbGlkZXNUb1Nob3c6IDUsXHJcbiAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogNSxcclxuICAgICAgICB9XHJcbiAgICAgIH0sIHtcclxuICAgICAgICBicmVha3BvaW50OiA2NDAsXHJcbiAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgIHNsaWRlc1RvU2hvdzogNCxcclxuICAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiA0LFxyXG4gICAgICAgfVxyXG4gICAgICB9LCB7XHJcbiAgICAgICAgYnJlYWtwb2ludDogNDIwLFxyXG4gICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICBzbGlkZXNUb1Nob3c6IDIsXHJcbiAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogMixcclxuICAgICB9XHJcbiAgICAgIH1dXHJcbiAgICB9KTtcclxuIFxyXG4gICQoJy5zbGlkZXItc2luZ2xlJykub24oJ2FmdGVyQ2hhbmdlJywgZnVuY3Rpb24oZXZlbnQsIHNsaWNrLCBjdXJyZW50U2xpZGUpIHtcclxuICAgICQoJy5zbGlkZXItbmF2LWFib3V0Jykuc2xpY2soJ3NsaWNrR29UbycsIGN1cnJlbnRTbGlkZSk7XHJcbiAgICB2YXIgY3VycnJlbnROYXZTbGlkZUVsZW0gPSAnLnNsaWRlci1uYXYtYWJvdXQgLnNsaWNrLXNsaWRlW2RhdGEtc2xpY2staW5kZXg9XCInICsgY3VycmVudFNsaWRlICsgJ1wiXSc7XHJcbiAgICAkKCcuc2xpZGVyLW5hdi1hYm91dCAuc2xpY2stc2xpZGUuaXMtYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2lzLWFjdGl2ZScpO1xyXG4gICAgJChjdXJycmVudE5hdlNsaWRlRWxlbSkuYWRkQ2xhc3MoJ2lzLWFjdGl2ZScpO1xyXG4gIH0pO1xyXG4gXHJcbiAgJCgnLnNsaWRlci1uYXYtYWJvdXQnKS5vbignY2xpY2snLCAnLnNsaWNrLXNsaWRlJywgZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB2YXIgZ29Ub1NpbmdsZVNsaWRlID0gJCh0aGlzKS5kYXRhKCdzbGljay1pbmRleCcpO1xyXG4gXHJcbiAgICAkKCcuc2xpZGVyLXNpbmdsZScpLnNsaWNrKCdzbGlja0dvVG8nLCBnb1RvU2luZ2xlU2xpZGUpO1xyXG4gIH0pO1xyXG5cclxuXHJcblxyXG5cclxufSk7Il0sImZpbGUiOiJhcHAubWluLmpzIn0=
